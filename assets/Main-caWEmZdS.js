import{i as e,o as t,r as n,t as r}from"./index-Bo6wEFah.js";import{t as i}from"./use-iptv-playlist-BDCjOab2.js";var a=t(e()),o=t(r()),s=()=>{let{fetchPlaylist:e}=i(),[t,n]=(0,a.useState)(``),[r,s]=(0,a.useState)(null),[c,l]=(0,a.useState)(!1);return(0,o.jsx)(`div`,{className:`min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-4 text-white md:p-8`,children:(0,o.jsx)(`div`,{className:`mx-auto flex min-h-[calc(100vh-2rem)] w-full max-w-6xl items-center justify-center md:min-h-[calc(100vh-4rem)]`,children:(0,o.jsxs)(`div`,{className:`w-full max-w-2xl rounded-3xl border border-white/10 bg-white/5 p-6 text-center shadow-2xl backdrop-blur-sm md:p-8`,children:[(0,o.jsx)(`h1`,{className:`text-3xl font-bold md:text-4xl`,children:`IPTV Playlist`}),(0,o.jsx)(`p`,{className:`mt-2 text-sm text-slate-300 md:text-base`,children:`Paste your M3U or provider playlist URL to load channels.`}),(0,o.jsxs)(`div`,{className:`mt-6 flex flex-col gap-3 sm:flex-row sm:items-center`,children:[(0,o.jsx)(`input`,{className:`h-11 flex-1 rounded-xl border border-white/20 bg-slate-900/80 px-4 text-sm text-white placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400`,type:`url`,placeholder:`https://example.com/playlist.m3u`,value:t,onChange:e=>{n(e.target.value)}}),(0,o.jsx)(`button`,{className:`h-11 rounded-xl border border-sky-300/40 bg-sky-500/20 px-5 text-sm font-semibold text-sky-100 transition hover:bg-sky-500/35 disabled:cursor-not-allowed disabled:opacity-50`,onClick:async()=>{let n=t.trim();if(!n){s(`Please provide a playlist URL.`);return}s(null),l(!0);try{await e(n)}catch(e){let t=e instanceof Error?e.message:`Unexpected error while loading playlist.`;s(t)}finally{l(!1)}},disabled:c,type:`button`,children:c?`Loadingâ€¦`:`Load playlist`})]}),r&&(0,o.jsx)(`p`,{className:`mt-4 rounded-lg border border-rose-400/30 bg-rose-500/15 px-3 py-2 text-sm text-rose-200`,children:r})]})})})},c=16,l=`All categories`,u=()=>{let e=i(e=>e.playlist),t=i(e=>e.setChannel),r=n(),[s,u]=(0,a.useState)(l),[f,p]=(0,a.useState)(1),m=(0,a.useMemo)(()=>{let t=e.items.map(e=>d(e)).filter(e=>e.length>0);return[l,...Array.from(new Set(t)).sort((e,t)=>e.localeCompare(t))]},[e.items]);(0,a.useEffect)(()=>{m.includes(s)||(u(l),p(1))},[m,s]);let h=(0,a.useMemo)(()=>e.items.map((e,t)=>({entry:e,index:t})).filter(({entry:e})=>s===l?!0:d(e)===s),[e.items,s]),g=Math.max(1,Math.ceil(h.length/c));(0,a.useEffect)(()=>{p(e=>Math.min(e,g))},[g]);let _=(0,a.useMemo)(()=>{let e=(f-1)*c;return h.slice(e,e+c)},[h,f]),v=e=>{t(e),r(`/player`)};return(0,o.jsx)(`div`,{className:`min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 p-4 text-white md:p-8`,children:(0,o.jsxs)(`div`,{className:`mx-auto flex w-full max-w-6xl flex-col gap-6 rounded-3xl border border-white/10 bg-white/5 p-4 shadow-2xl backdrop-blur-sm md:p-6`,children:[(0,o.jsxs)(`div`,{className:`flex flex-col gap-3 md:flex-row md:items-center md:justify-between`,children:[(0,o.jsxs)(`div`,{children:[(0,o.jsx)(`h1`,{className:`text-3xl font-bold`,children:`Channels`}),(0,o.jsx)(`p`,{className:`text-sm text-slate-300`,children:`Browse by category and open channels instantly.`})]}),(0,o.jsxs)(`label`,{className:`flex items-center gap-2 text-sm`,children:[(0,o.jsx)(`span`,{className:`text-slate-300`,children:`Category:`}),(0,o.jsx)(`select`,{className:`rounded-md border border-white/20 bg-slate-900/80 px-3 py-2 text-sm text-white`,value:s,onChange:e=>{u(e.target.value),p(1)},children:m.map(e=>(0,o.jsx)(`option`,{value:e,children:e},e))})]})]}),(0,o.jsx)(`div`,{className:`grid gap-3 md:grid-cols-4`,children:_.map(({entry:e,index:t})=>{let n=e.tvg?.logo??``,r=e.name||e.tvg?.name||`Unnamed channel`;return(0,o.jsxs)(`button`,{className:`flex min-h-20 items-center gap-3 rounded-xl border border-white/10 bg-slate-900/70 p-3 text-left transition hover:border-sky-400 hover:bg-slate-800/80 focus-visible:ring-2 focus-visible:ring-sky-400 md:min-h-36 md:flex-col md:justify-between`,onClick:()=>{v(t)},type:`button`,children:[n?(0,o.jsx)(`img`,{className:`h-12 w-12 shrink-0 rounded-md object-cover md:h-16 md:w-16`,src:n,alt:`${r} logo`}):(0,o.jsx)(`div`,{className:`flex h-12 w-12 shrink-0 items-center justify-center rounded-md bg-white/10 text-xl md:h-16 md:w-16`,children:`ðŸ“º`}),(0,o.jsx)(`span`,{className:`text-sm font-medium text-slate-100 md:text-center md:text-base`,children:r})]},`${t}-${r}`)})}),_.length===0&&(0,o.jsx)(`div`,{className:`rounded-xl border border-dashed border-white/20 bg-slate-900/60 p-6 text-center text-slate-300`,children:`No channels found for this category.`}),(0,o.jsxs)(`div`,{className:`flex items-center justify-between rounded-xl bg-slate-900/70 p-3`,children:[(0,o.jsx)(`button`,{className:`rounded-md border border-white/20 px-4 py-2 text-sm transition enabled:hover:border-sky-400 enabled:hover:text-sky-300 disabled:cursor-not-allowed disabled:opacity-40`,onClick:()=>{p(e=>Math.max(1,e-1))},disabled:f===1,type:`button`,children:`Previous`}),(0,o.jsxs)(`span`,{className:`text-sm text-slate-300`,children:[`Page `,f,` / `,g,` Â· `,h.length,` channels`]}),(0,o.jsx)(`button`,{className:`rounded-md border border-white/20 px-4 py-2 text-sm transition enabled:hover:border-sky-400 enabled:hover:text-sky-300 disabled:cursor-not-allowed disabled:opacity-40`,onClick:()=>{p(e=>Math.min(g,e+1))},disabled:f===g,type:`button`,children:`Next`})]})]})})};function d(e){let t=e;return(t.group?.title??t.groupTitle??t.attrs?.[`group-title`]??``).trim()}var f=u,p=()=>{let{playlist:e}=i();return e?(0,o.jsx)(f,{}):(0,o.jsx)(s,{})};export{p as default};